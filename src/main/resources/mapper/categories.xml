<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo.dao.CategoriesDao">
   <resultMap id="categoryResultMap" type="com.example.demo.model.CategoriesModel">
        <id property="categoryId" column="categoryId"/>
        <result property="categoryName" column="categoryName"/>
        <result property="image" column="image"/>
       <collection property="shops" ofType="com.example.demo.model.ShopModel">
           <result property="sid" column="sid"/>
           <result property="file" column="file"/>
           <result property="name" column="name"/>
           <result property="tel" column="tel"/>
           <result property="addr" column="addr"/>
           <result property="open_time" column="open_time"/>
           <result property="end_time" column="end_time"/>
           <result property="userId" column="userId"/>
       </collection>
   </resultMap>

    <select id="CategoriesList"  resultMap="categoryResultMap">
        SELECT
            c.categoryId, c.categoryName, c.image,
            si.sid, si.file, si.name, si.tel, si.addr,
            date_format(si.open_time,'%H:%i') as open_time,
            date_format(si.end_time,'%H:%i') as end_time,
            si.userId
        FROM
            categories AS c
        LEFT OUTER JOIN
            shop_info AS si ON c.categoryId = si.categoryId
        order by
            c.categoryId

    </select>
</mapper>

